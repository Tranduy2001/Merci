(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8609],{87500:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories/[id]",function(){return n(35246)}])},35246:function(e,t,n){"use strict";n.r(t),n.d(t,{Category:function(){return h},__N_SSP:function(){return g}});var l=n(24246),i=n(27378),a=n(86677),o=n(17486),r=n(34982),s=n(12549),u=n(88038),d=n.n(u),c=n(38541),p=n(66230),f=n(774),m=n(19159),v=n(73868),g=!0;let h=e=>{var t,n,u;let{category:g,story:h,unlistedTemplate:x,...w}=e,{data:_}=(0,v.useSession)(),y=(0,a.useRouter)(),{id:j,tid:C,iid:T}=y.query,[k,b]=(0,i.useState)(g),[N,S]=(0,i.useState)(null!==(u=null!==(n=(null!==(t=null==k?void 0:k.templates)&&void 0!==t?t:[]).find(e=>e.id===C))&&void 0!==n?n:x)&&void 0!==u?u:null),I=(0,i.useMemo)(()=>{var e;let t=null==h?void 0:h.content;if(!t)return null;let n=t.categories.find(e=>e.name===(null==k?void 0:k.name));return n||(null!==(e=t.categories.find(e=>"Fallback"===e.name))&&void 0!==e?e:null)},[null==k?void 0:k.name,h]),B=(0,i.useMemo)(()=>{if(!N)return"Designify";let e="".concat(N.name," - Designify");if(!I)return e;let t=I.title;if(!t)return e;let n=N.name.toLowerCase();return t.replace("$template",n)},[N,I]);function E(e){var t;let n=(null!==(t=null==k?void 0:k.templates)&&void 0!==t?t:[]).find(t=>t.id===e),l=c.Z.stringify({tid:e,iid:T},{skipNull:!0});y.replace("/categories/".concat(j,"?").concat(l),void 0,{shallow:!0}),n&&S(n)}return(0,i.useEffect)(()=>{N||y.replace("/404")},[N,y]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.PB,{title:B,description:null==g?void 0:g.description,noindex:!g||!N||Boolean(T)||!!x}),(0,l.jsxs)(d(),{children:[(0,l.jsx)("meta",{charSet:"utf-8"}),(0,l.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,l.jsxs)(f.xu,{height:"100%",children:[(0,l.jsx)(p.xG,{display:{base:T?"none":"block",lg:"block"},contentColorMode:"dark",position:"relative",zIndex:5,navigationUseCasePages:w.navigationUseCasePages}),Boolean(T)&&k&&N&&(0,l.jsx)(r.I,{category:x?{...k,templates:[x]}:k,currentTemplateId:N.id,hideNumberOfTemplates:!!x,imageId:T,onTemplateChange:E,onTemplateUpdate:function(e){var t;let n=(null!==(t=null==k?void 0:k.templates)&&void 0!==t?t:[]).findIndex(t=>t.id===e.id);if(n>-1&&k&&g){let t=k.templates;t[n]=e,b({...g,templates:t}),S(e)}},onTemplateDelete:function(e){var t;let n=(null!==(t=null==k?void 0:k.templates)&&void 0!==t?t:[]).filter(t=>t.id!==e);0===n.length?y.push("/gallery"):k&&b({...k,templates:(0,m.pj)(n)})}}),!T&&h&&N&&g&&(0,l.jsx)(s.L,{templateId:N.id,selectedCategory:g,story:h,showMoreTemplatesSection:!0,ownedByUser:N.userId===(null==_?void 0:_.user.id),onTemplateChange:E}),(0,l.jsx)(p.$_,{divider:!0})]})]})};t.default=h},12549:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var l=n(24246),i=n(72352),a=n(40237),o=n(52853),r=n(56552),s=n(86144),u=n(86677);let d=e=>{let{templateId:t,selectedCategory:n,story:d,showMoreTemplatesSection:c=!1,ownedByUser:p=!1,onTemplateChange:f,...m}=e,v=(0,u.useRouter)(),g=(0,o.s$)(),{isLoading:h,data:x}=(0,r.useQuery)(["template",t,void 0],async()=>{let{data:e,status:n,apiErrors:l}=await g((0,s.nO)().get("/api/templates/".concat(t,"?")));if(404===n)v.replace("/404");else{if(!l)return null==e?void 0:e.data.template;v.replace("/design-not-found")}return null},{enabled:Boolean(t),refetchOnMount:!0});return(0,l.jsx)(i.W,{maxW:"990px",pt:"130px",...m,children:!h&&d&&(0,l.jsx)(a.Xj,{blok:d.content,category:n,template:x,showMoreTemplatesSection:c,ownedByUser:p,onTemplateChange:f})})};var c=d}},function(e){e.O(0,[7969,4412,1069,4982,9774,2888,179],function(){return e(e.s=87500)}),_N_E=e.O()}]);